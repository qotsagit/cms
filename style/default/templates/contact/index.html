<div class="row">
	
	<div class="col-md-3">
		<div class="panel-group" id="accordion">
				
		<?php
			$i = 1;
			foreach($this->Items as $item)
			{
		?>
		<div class="panel panel-default">
			<a data-toggle="collapse" data-parent="#accordion" href="#collapse<?php print $i ?>">
			<div class="panel-heading">
				<h2 class="panel-title">
					<?php print $item->title; ?>
				</h2>
			</div>
			</a>
			<div id="collapse<?php print $i ?>" class="panel-collapse collapse">
				<div class="panel-body"><?php print $item->text; ?></div>
			</div>
		</div>
		
		<?php
			$i++;
			}
		?>
		</div>
	</div>
	<div class="col-md-9">
		<div id="map-canvas" style="border:0px solid; height:600px; width:100%"></div>
	</div>
</div>
  

<script>
    
    var map;
    var infowindow;
    
	function panTo()
	{
		map.panTo(curmarker.position);	
	}
	
    function initMap()
    {
        var mapStyle = [{'featureType': 'administrative', 'elementType': 'labels.text.fill', 'stylers': [{'color': '#444444'}]}, {'featureType': 'landscape', 'elementType': 'all', 'stylers': [{'color': '#f2f2f2'}]}, {'featureType': 'poi', 'elementType': 'all', 'stylers': [{'visibility': 'off'}]}, {'featureType': 'road', 'elementType': 'all', 'stylers': [{'saturation': -100}, {'lightness': 45}]}, {'featureType': 'road.highway', 'elementType': 'all', 'stylers': [{'visibility': 'simplified'}]}, {'featureType': 'road.arterial', 'elementType': 'labels.icon', 'stylers': [{'visibility': 'off'}]}, {'featureType': 'transit', 'elementType': 'all', 'stylers': [{'visibility': 'off'}]}, {'featureType': 'water', 'elementType': 'all', 'stylers': [{'color': '#4f595d'}, {'visibility': 'on'}]}];

        // Create the map
        map = new google.maps.Map(document.getElementById('map-canvas'),
        {
            zoom: 10,
            styles: mapStyle,
            center: new google.maps.LatLng(51.264, 15.569)
        });
    }
    
    function initinfoWindow()
    {
        infowindow = new google.maps.InfoWindow();
    }
        
    function createMarker(lat, lon, title, text)
    {
        return marker = new google.maps.Marker({
        position: new google.maps.LatLng(lat, lon),
        map: map,
        title: title,
        text: text
        });
    }
    
    function createInfoWindowEvent(m)
    {
        google.maps.event.addListener(m, 'click', function()
        {
            infowindow.setContent(m.title + '<br>' + m.text );
            infowindow.open(map, m);
        });
    }
	
	function createListItem(m)
	{
		var ul = document.getElementById("items");
		var li = document.createElement("li");
		li.innerHTML = m.title;
		ul.appendChild(li);
	}
    
	function initPlaces(url)
	{
        
		$.ajax
		({
			type: "POST",
			url: url,
			success: function(html)
			{

				places = JSON.parse(html);
				
				for (var i = 0; i < places.length; i++)
				{
					var marker = createMarker(places[i].lat, places[i].lon, places[i].title,places[i].text);
					createInfoWindowEvent(marker);
					// nie używamy, robimy listę zwykłym html
					//createListItem(marker);
				}
				
			},
		});
		
	}
		
    function init()
    {
        initMap();
        initinfoWindow();
		initPlaces("contact/placesJson");
        
		//alert(places.length);
       
        
        /*    
         = createMarker(51.2641800,15.5697000,content('Bolesławiec','Opis bolesławca'));
        
        
        var marker = createMarker(51.2641800,15.6697000,content('Tomaszów','Opis tomaszowa'));
        createInfoWindowEvent(marker);
        */
    }
       
    
</script>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?key=AIzaSyAtyXbZQiMV2BFDdztVuCZPfzN_rijV4_U&callback=init" async defer></script>
<!--<script src="../../dist/snazzy-info-window.min.js"></script>-->


 




   


